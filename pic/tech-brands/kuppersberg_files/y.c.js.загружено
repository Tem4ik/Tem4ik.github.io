"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yaglaGetFile(){var e,t,a;return e=window,t=document,a=null,e.__FILE__=function(){try{a()}catch(e){return e.stack&&(a=/(http[s]?:\/\/.*):\d+:\d+/m.exec(e.stack))&&1<a.length?a[1]:(0<(a=0<t.scripts.length?t.scripts[t.scripts.length-1].src:"").length&&a.indexOf("://")<0&&"/"!=a.substring(0,1)&&(a=location.protocol+"//"+location.host+"/"+a),a)}}(),__FILE__}var _YAGLA=function(){function e(){var s=this;return s.$_GET=function(e){var t=window.location.search;return s.getParamForString(t,e)},s.getHash=function(){var e=yaglaGetFile();return s.getParamForString(e,"h")},s.getParamForString=function(e,t){var a=e.match(new RegExp(t+"=([^&=]+)"));return a?a[1]:""},s.setCookie=function(e,t){var a=e+"="+(t=encodeURIComponent(t));a+=";path=/",document.cookie=a+";domain=."+s.cookieDomain},s.getCookie=function(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0},s.getCookieDomain=function(){var e=document.domain,t=e.split(".");return"www"==t[0]&&(e=t.slice(1).join(".")),e},s.checkOldBrowser=function(){if(!Object.keys){Object.keys=(r=Object.prototype.hasOwnProperty,n=!{toString:null}.propertyIsEnumerable("toString"),l=(i=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(e){if("object"!==_typeof(e)&&("function"!=typeof e||null===e))throw new TypeError("Object.keys called on non-object");var t,a,o=[];for(t in e)r.call(e,t)&&o.push(t);if(n)for(a=0;a<l;a++)r.call(e,i[a])&&o.push(i[a]);return o});var e=document.createElement("script");e.setAttribute("type","text/javascript"),e.src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js",document.getElementsByTagName("head")[0].appendChild(e),YAGLA.selector_status=!1}var r,n,i,l},s.log=function(e){1==s.logEnabled&&console.log("yagla:"+e)},s.initGA=function(e,t){if(void 0!==e&&""!==e){s.ga=null,a=window,o=document,r="script",n="//www.google-analytics.com/analytics.js",i="ga_yagla",a.GoogleAnalyticsObject=i,a[i]=a[i]||function(){(a[i].q=a[i].q||[]).push(arguments)},a[i].l=1*new Date,l=o.createElement(r),c=o.getElementsByTagName(r)[0],l.async=1,l.src=n,c.parentNode.insertBefore(l,c),s.ga=ga_yagla||window.ga_yagla,s.ga("create",e,{name:"trackerY",cookieName:"trackerY",cookieDomain:t}),s.ga("trackerY.send","pageview")}var a,o,r,n,i,l,c},s.sendRequestUpdateParams=function(e){if(void 0!==e){this.id=e;var t=s.getUpdateParams(e);s.sendRequest(YAGLA.url,t)}},s.sendRequest=function(e,t){e+=t,""!=s.hash&&(e+="&h="+s.hash),""!=s.getCampaign&&(e+="&c="+s.getCampaign);var a=document.createElement("script");a.setAttribute("type","text/javascript"),a.onreadystatechange=function(){"interactive"!=this.readyState&&"complete"!=document.readyState||(this.onreadystatechange=null)},a.src=e,document.getElementsByTagName("head")[0].appendChild(a)},s.cssInit=function(){if(!document.getElementById("yagla_css")){var e=" body {opacity: 0;}",t=document.createElement("style");if(t.setAttribute("type","text/css"),t.setAttribute("id","yagla_css"),t.styleSheet)t.styleSheet.cssText=e;else{var a=document.createTextNode(e);t.appendChild(a)}document.getElementsByTagName("head")[0].appendChild(t),s.bodyHide=1}},s.openPageCss=function(){if(s.bodyHide){s.log("openPageCss");var e=document.getElementById("yagla_css");document.body.style.visibility="hidden",e&&document.getElementsByTagName("head")[0].removeChild(e),setTimeout(function(){document.body.style.visibility="visible"},50),s.bodyHide=0}},s.addYaglaPanel=function(){if(-1==s.getYagla){var e=document.createElement("script");e.setAttribute("type","text/javascript"),e.src=s.url+"/js/yaglapanel.js?2",document.getElementsByTagName("head")[0].appendChild(e);var t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.href=s.url+"/css/yaglapanel.css?2",document.getElementsByTagName("head")[0].appendChild(t)}},s.insertReplaces=function(e,t){s.errorInsertReplace=!0,s.errorComments="";for(var a=s.errorNotFound="",o=s.countCorrectSelector=0,r=0;Object.keys(e).length>r;r++)if(void 0!==e[r])if(o=e[r].type,""!==e[r].selector){if(0<(a=s.selector_status?document.querySelectorAll(e[r].selector):$(e[r].selector)).length&&(s.countCorrectSelector++,"2"==o&&""!==e[r].value))for(var n=0;a.length>n;n++){a[n].setAttribute("rollBackData",a[n].src),a[n].src="";var i=a[n].getAttribute("srcset");i&&(a[n].setAttribute("rollBackDataSrcSet",i),a[n].setAttribute("srcset",""))}a.length<=0&&(s.errorInsertReplace=!1,s.errorComments+=" --- not found element: "+e[r].id,s.errorNotFound+=e[r].id+"-")}else s.errorInsertReplace=!1;if(s.errorInsertReplace||0<s.countCorrectSelector&&0==t.ShowOnlyIfAllFind){for(s.errorInsertReplace=!0,s.statusReplace=1,r=0;Object.keys(e).length>r;r++)if(void 0!==e[r]&&""!==e[r].selector&&(a=s.selector_status?document.querySelectorAll(e[r].selector):$(e[r].selector),o=e[r].type,0<=a.length&&(1!=t.ShowOriginIfEmpty||""!=e[r].value)))for(n=0;a.length>n;n++)switch(o){case"1":a[n].innerHTML=e[r].value;break;case"2":var l=e[r].value;0==t.ShowOriginIfEmpty&&""==e[r].value&&(a[n].style.width=a[n].clientWidth+"px",a[n].style.height=a[n].clientHeight+"px",l=s.url+"/images/null.png"),a[n].src=l,a[n].getAttribute("rollBackDataSrcSet")&&a[n].setAttribute("srcset",l),a[n].getAttribute("data-orig-src")&&a[n].setAttribute("data-orig-src",l),a[n].getAttribute("data-original")&&a[n].setAttribute("data-original",l),a[n].getAttribute("data-src")&&a[n].setAttribute("data-src",l);break;case"3":a[n].style.backgroundImage=null,a[n].style.backgroundImage="url("+e[r].value+")";var c=a[n].getAttribute("style");";"==c.substr(-1)?a[n].setAttribute("style",c.slice(0,-1)+" !important;"):a[n].setAttribute("style",c+" !important;"),a[n].getAttribute("data-lazy-bgimage")&&a[n].setAttribute("data-lazy-bgimage",e[r].value);break;case"4":a[n].value=e[r].value}}else s.log("not found selector")},s.replaces_param=function(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0},s.getUpdateParams=function(e){return s.updateStat+"id="+e+"&statusreplace="+s.statusReplace+"&url="+s.nowUrl+"&yagla="+s.getYagla+"&notfound="+s.errorNotFound+"&cookie_enable="+s.cookieEnable},s.checkReplaces=function(){"undefined"!=typeof yagla_params&&void 0!==yagla_params.replaces||(null===document.body?setTimeout(s.checkReplaces,s.checkErrorTime):s.openPageCss())},s.rollBackImage=function(){for(var e=document.querySelectorAll("[rollBackData]"),t=0;e.length>t;t++)e[t].src=e[t].getAttribute("rollBackData"),e[t].removeAttribute("rollBackData");for(e=document.querySelectorAll("[rollBackDataSrcSet]"),t=0;e.length>t;t++)e[t].srcset=e[t].getAttribute("rollBackDataSrcSet"),e[t].removeAttribute("rollBackDataSrcSet")},s.tryAnotherHash=function(t){s.hashPool=s.hashPool.filter(function(e){return e!=t}),0<s.hashPool.length&&0<s.requestLimit?(s.requestLimit-=1,s.hash=s.hashPool[0],s.run()):s.openPageCss()},s.init=function(){if(s.log("YaglaInit() "+s.getYagla),""!==s.getYagla)try{if(s.log("init TRY 1"),"undefined"!=typeof yagla_params&&""!==yagla_params){var e=yagla_params.log,t=yagla_params.replaces;if(void 0!==yagla_params.yaglametrika&&(s.metrika.id=yagla_params.yaglametrika,"function"==typeof yagla_complete&&yagla_complete()),-1==yagla_params.rtype)s.sendRequestUpdateParams(e),s.openPageCss();else{if(s.checkHash=yagla_params.checkHash,void 0===t&&"undefined"!=typeof yagla_hash)return void s.tryAnotherHash(yagla_hash);if(s.log("init TRY 2"),void 0!==t){void 0!==t.group&&s.setCookie("yagla_rep",t.group);var a=setInterval(function(){s.insertReplaces(t,yagla_params.flags),s.log(s.errorInsertReplace),!s.errorInsertReplace&&null==s.checkHash||(s.sendRequestUpdateParams(e),s.addYaglaPanel(),clearInterval(a),clearTimeout(o),s.openPageCss())},s.intervalInsert),o=setTimeout(function(){void 0!==e&&(s.sendRequestUpdateParams(e),s.rollBackImage(),s.addYaglaPanel()),clearInterval(a),s.openPageCss()},s.checkFindReplaceTime)}else s.openPageCss()}}else s.log("yagla_params is undefined")}catch(e){s.log(e)}else s.log("except try Yalga (getyagla is undefined )")},s.updatePage=function(){""!==t.getYagla&&t.url_component.set_replace_page(),t.url_component.update_replace_page()},s.checkYagla=function(){""===s.getYagla&&s.url_component.insert_page_status&&(void 0===s.fromCookie||""===s.fromCookie||0===s.fromCookie?s.log("empty yagla params & cookie empty"):(s.cookieEnable=1,s.getYagla=t.fromCookie,s.log("Get yagla param from cookies: "+t.getYagla)))},s.checkCode=function(){""!==s.checkCodeId&&(s.log("check code for page "+s.checkCodeId),s.sendRequest(s.url+s.checkCodeUrl,"templateId="+s.checkCodeId))},s.run=function(){if(""!==s.getYagla)if(s.cssInit(),-1==s.getYagla)s.replace=s.$_GET("yaglareplace"),""!==s.replace&&(s.log("download replace for preview"),s.sendRequest(s.url+s.getData,"yagla=-1&replace="+s.replace+"&token="+s.$_GET("token")));else{var e="yagla="+s.getYagla;if(s.fromCookie==s.getYagla){s.cookieEnable=1;var t=s.getCookie("yagla_rep");void 0!==t&&(e+="&yagla_rep="+t)}else s.setCookie("yagla",s.getYagla);e+="&cookie_enable="+s.cookieEnable,e+="&referrer="+encodeURIComponent(document.referrer),e+="&url="+encodeURIComponent(document.location.href),s.sendRequest(s.url+s.getData,e)}},s.afterAll=function(){if(""===s.getYagla){s.metrika.visitcurrentpage();var e=s.getCookie("yagla_gaid");void 0!==e&&""!==e&&s.initGA(e,s.cookieDomain);var t=s.getCookie("yagla_cs");void 0!==t&&""!==t&&s.sendRequest(s.url+"/ajax/getservicescode?","servicelist="+t+"&cookie_enable="+s.cookieEnable)}},s.splitYagla=function(){var e=s.$_GET("yagla").split("_");return s.getCampaign=void 0!==e[1]?e[1]:"",e[0]},s.url_component={insert_page_status:!1,query_clean_urls:["yagla","utm_source","utm_medium","utm_campaign","utm_content","utm_term","openstat","from","gclid","yclid","utm_position","utm_placement","utm_position_type","utm_matchtype","utm_network","rs","roistat","k50id","calltouch_tm"],query_clean:function(e,t){for(var a=0;void 0!==t[a];a++){var o=new RegExp("(\\?|&?)("+t[a]+"=).*?(&|$)");0<=e.search(o)&&(e=e.replace(o,""))}return e},update_replace_page:function(){var e=s.getCookie("yagla_page");void 0!==e&&e==this.query_clean(document.location.href,this.query_clean_urls)&&(s.log("true page insert"),this.insert_page_status=!0)},set_replace_page:function(){var e=this.query_clean(document.location.href,this.query_clean_urls);s.setCookie("yagla_page",e),this.page_url=e},page_url:void 0},s.metrika={id:s.getCookie("yagla_metrika"),updatevisitor:function(){s.setCookie("yagla_metrika",this.id),s.sendRequest(s.metrikaUrl+"/updatevisitor?","id="+this.id),s.log("yagla_metrika="+this.id)},visitcurrentpage:function(){this.id=s.getCookie("yagla_metrika"),void 0!==this.id&&(s.log("send eventpage: "+document.location.href),s.sendRequest(s.metrikaUrl+"/addevent?","id="+this.id+"&type=page&param="+encodeURIComponent(document.location.href)))},action:function(e){this.id=s.getCookie("yagla_metrika"),void 0!==this.id&&(s.log("action: "+e),s.sendRequest(s.metrikaUrl+"/addevent?","id="+this.id+"&type=action&param="+e))},service:function(e,t){if(this.id=s.getCookie("yagla_metrika"),void 0!==this.id){s.log("service: "+e,"params: "+t);var a="id="+this.id+"&type=service&param="+e;void 0!==t&&(a+="&data="+encodeURIComponent(t)),s.sendRequest(s.metrikaUrl+"/addevent?",a)}}},s.url="https://yagla.ru",s.metrikaUrl="https://metrika.yagla.ru",s.getData="/ajax/getReplaces?",s.updateStat="/ajax/updateStatReplaces?",s.updateGoal="/ajax/updateGoal?",s.checkCodeUrl="/ajax/checkCode?",s.selector_status=!0,s.updateStatus=!1,s.nowUrl=encodeURIComponent(location.origin+location.pathname),s.replace="",s.checkErrorTime=5e3,s.checkFindReplaceTime=5e3,s.intervalInsert=50,s.requestLimit=10,s.errorInsertReplace=!1,s.errorNotFound="",s.errorComments="",s.insertReplaceStatus=!0,s.statusReplace=0,s.cookieEnable=0,s.countCorrectSelector=0,s.process=0,s.bodyHide=0,s.ga=null,s.replace=null,s.hash=null,s.hashPool=[],s.checkHash=null,s.getCampaign="",s.getYagla=s.splitYagla(),s.logEnabled=s.$_GET("yaglalog"),s.checkCodeId=s.$_GET("yaglaCheckCode"),s.cookieDomain=s.getCookieDomain(),s.fromCookie=s.getCookie("yagla"),s}var t=null;return{getInstance:function(){return t=t||new e}}}();if(void 0===YAGLA){var YAGLA=_YAGLA.getInstance();YAGLA.hash=YAGLA.getHash(),YAGLA.hashPool.push(YAGLA.hash),YAGLA.checkCode(),YAGLA.checkOldBrowser(),YAGLA.updatePage(),YAGLA.checkYagla(),YAGLA.run(),YAGLA.afterAll(),YAGLA.checkReplaces();var yaglametrika=YAGLA.metrika}else window.YAGLA.hashPool.push(window.YAGLA.getHash());var yaglaSetCookie=function(e,t){YAGLA.setCookie(e,t)};function yaglaaction(e){window.yaglametrika.action(e)}function yaglaservice(e,t){window.yaglametrika.service(e,t)}